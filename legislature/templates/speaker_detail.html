{% extends 'speeches/base.html' %}
{% load url from future %}
{% load legislature_extras pagination %}

{% block title %}{{ speaker.name|person_name }}{% endblock %}

{% block content %}
{% include "speeches/_breadcrumbs.html" %}
{% long_paginator as pagination %}

<div class="container-fluid">
  <div class="row">
    <div class="col-xs-10 col-md-8 col-xs-offset-2">
      <h1>{{ speaker.name|person_name }}</h1>
    </div>
  </div>

  <div class="row">
    <div class="col-xs-2">
{% if speaker.image %}
      <figure>
        <img src="{{ speaker.image }}" alt="">
        <figcaption>Nova Scotia Legislature photo</figcaption>
      </figure>
{% endif %}
{% if speaker.email %}
      <p class="contact">
        <a href="mailto:{{ speaker.email }}">
          Email {{ speaker.name|person_short_name }}
        </a>
      </p>
{% endif %}
{% if speaker.sources.all %}
      <p>
        <a href="{{ speaker.sources.all.0.url }}">
          On the legislature's site
        </a>
      </p>
{% endif %}
    </div>
    <div class="col-xs-10 col-md-8">
{% if speaker.memberships.all %}
      <p class="memberships">{{ speaker|speaker_description }}</p>
{% endif %}

      <form action="{% url "speeches:haystack_search" %}" method="get" >
        <input type="hidden" name="p" value="{{ speaker.id }}">
        <input type="search" placeholder="Search {{ speaker.name|person_short_name }}'s speeches" name="q">
        <input type="submit" value="Search">
      </form>

{{ pagination }}

{% for speech in object_list %}
      <div class="col-speech col-speech-with-border">
{% include "speeches/speech.html" with speech=speech with_context=1 %}
      </div>
{% endfor %}

{{ pagination }}
    </div>
  </div>
</div>
{% endblock %}
